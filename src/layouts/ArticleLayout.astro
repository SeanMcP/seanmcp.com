---
import PageLayout from "./PageLayout.astro";
import Bio from "@components/Bio.astro";
import ReadableTime from "@components/ReadableTime.astro";
import TagList from "@components/TagList.astro";
import BookmarkToggle from "@components/BookmarkToggle.astro";

const { frontmatter } = Astro.props;
---

<PageLayout {...frontmatter} withoutH1>
  <article class="article">
    <header>
      <div>
        {
          !frontmatter.tags?.includes("garden") && (
            <ReadableTime date={frontmatter.pubDate} />
          )
        }
        <h1>{frontmatter.title}</h1>
      </div>
      <BookmarkToggle />
    </header>
    <slot />
    <hr />
    <footer>
      {
        frontmatter.verse && (
          <a
            href={`https://esv.org/${frontmatter.verse}`}
            target="_blank"
            rel="noopener noreferrer"
          >
            {frontmatter.verse}
          </a>
        )
      }
      <a
        href={`mailto:sean@seanmcp.com?subject=Re: ${frontmatter.title}`}
        id="comment-link">Send a comment</a
      >
      <div>Read more: <TagList tags={frontmatter.tags} /></div>
    </footer>
  </article>
  <hr />
  <Bio />
</PageLayout>

<style>
  article {
    padding-top: 2rem;
  }

  header {
    align-items: center;
    display: flex;
    gap: 1rem;
    justify-content: space-between;
    margin-bottom: 2rem;
    /* Offset SVG's padding */
    margin-right: -0.5rem;
  }

  header div {
    flex: 1;
  }

  /* Specificity to override global styles */
  header h1 {
    font-size: 2em;
    margin: 1rem 0 0;
  }

  footer {
    align-items: flex-start;
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

  :global(.article img) {
    max-width: 100%;
  }
</style>

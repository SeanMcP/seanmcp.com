<!doctype html>
<html lang="en" >
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        





<title>Convert class components to functions with React Hooks - SeanMcP.com</title>
<meta property="og:site_name" content="SeanMcP.com" />
<meta property="og:title" content="Convert class components to functions with React Hooks" />
<meta name="twitter:title" content="Convert class components to functions with React Hooks">

<meta name="description" content="A step by step guide to converting old components to modern React">
<meta property="og:description" content="A step by step guide to converting old components to modern React" />
<meta name="twitter:description" content="A step by step guide to converting old components to modern React">

<meta property="og:image" content="https://seanmcp.com/img/seanmcp.favicon.png" />
<meta name="twitter:image" content="https://seanmcp.com/img/seanmcp.favicon.png">


<meta property="og:type" content="website" />
<meta property="og:url" content="https://seanmcp.com/articles/convert-class-component-to-function-with-hooks/" />


<meta name="twitter:card" content="summary">
<meta name="twitter:creator" content="@snmcp">
        <link rel="stylesheet" href="/css/index.css">
        <link rel="alternate" href="/feed/feed.xml" type="application/atom+xml" title="Sean McPherson">
        <link rel="alternate" href="feed/notes.xml" type="application/atom+xml" title="Notes on Sean McPherson">
        
            <link rel="shortcut icon" href="/img/seanmcp.favicon.png" type="image/png">
        
        
        <style>:root{--dark:hsl(216, 5%, 10%);--light:hsl(216, 5%, 97%);--accent:hsl(188, 100%, 42%);--primary:hsl(216, 85%, 34%);--background:var(--light);--off-background:hsla(0, 0%, 10%, 20%);--text-color:var(--dark);--anchor-color:var(--primary);--note-anchor-color:var(--accent);--block-code-background:hsla(0, 0%, 0%, 90%);--inline-code-background:hsla(0, 0%, 0%, 7.5%);--inline-code-color:hsla(0, 0%, 0%, 75%);--body-font:-apple-system,BlinkMacSystemFont,Helvetica,Arial,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif;--mono-font:Menlo,Monaco,Consolas,"Andale Mono WT","Andale Mono","Lucida Console","DejaVu Sans Mono","Bitstream Vera Sans Mono","Liberation Mono","Nimbus Mono L","Courier New",Courier,monospace}html[data-page-flavor=soccer]{--accent:hsl(100, 50%, 50%);--primary:hsl(120, 50%, 30%)}body{--scroll-progress-height:6px;background:var(--background);color:var(--text-color);font-family:var(--body-font);margin:0;padding:0;padding-top:var(--scroll-progress-height);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}body[data-theme=dark]{--background:var(--dark);--off-background:hsla(216, 5%, 95%, 15%);--text-color:var(--light);--anchor-color:var(--accent);--inline-code-background:hsla(0, 0%, 0%, 50%);--inline-code-color:hsla(0, 0%, 100%, 85%);--note-anchor-color:var(--primary)}.container{padding:1rem;margin:0 auto}.site-header .container{align-items:center;display:flex;justify-content:space-between}.site-header nav{align-items:center;display:flex;flex-wrap:wrap}.site-header nav a:not(:last-of-type){margin-right:1rem}:is(.stars-toggle,.theme-toggle):hover{cursor:pointer;outline:0!important}:is(.theme-toggle,.stars-toggle):focus-within{outline:3px solid var(--anchor-color);outline-offset:3px}.theme-toggle:hover span::before{transform:translateX(-2px)}.theme-toggle:hover span::after{transform:translateX(2px)}.theme-toggle input+span{--size:1.25em;display:inline-block;position:relative;width:var(--size);height:var(--size)}.theme-toggle input+span::after,.theme-toggle input+span::before{border:1px solid var(--text-color);content:"";display:inline-block;height:calc(var(--size) * 2 / 3);position:relative;transition:transform .1s ease-in-out;width:calc(var(--size) * 2 / 3)}.theme-toggle input+span::before{background-color:var(--text-color)}.theme-toggle input+span::after{background:var(--background);position:absolute;bottom:0;right:0}.theme-toggle input:checked+span::before{background-color:var(--background)}.theme-toggle input:checked+span::after{background-color:var(--text-color);z-index:-1}.stars-toggle{align-items:center;display:flex;justify-content:center}.stars-toggle svg{display:inline-block}.stars-toggle path{transition:transform .2s ease-in-out;transform-origin:50% 50%}.stars-toggle:hover path{transform:rotate(72deg)}.stars-toggle input:checked+svg{fill:currentColor}[data-star]{cursor:pointer;font-size:1.5rem;position:absolute;transform:translate(-50%,-50%)}[data-star]:after{content:"⭐️";display:inline-block}@media screen and (min-width:500px){.container{padding:2rem}.container.--content{max-width:70ch}}.breadcrumbs ol{display:flex;list-style:none;margin:0;padding:0}.breadcrumbs li+li::before{color:var(--off-background);content:"/";display:inline-block;height:1rem;margin:0 .5rem}.skip-link{background-color:var(--primary);color:#fff!important;font-weight:700;position:fixed;padding:1rem;z-index:9999}.skip-link:not(:focus){right:200%}.skip-link:focus{left:0;outline:2px dotted white}#scroll-progress{--height:var(--scroll-progress-height);background:linear-gradient(to right,var(--accent),var(--primary));position:fixed;height:var(--height);left:0;right:0;top:0;z-index:1000}#scroll-progress span{--width:var(--height);border-right:var(--width) solid var(--background);bottom:0;left:calc(var(--width)/ -2);position:absolute;top:0;width:0%}</style>
        
        
            <link rel="stylesheet" href="/css/prism.css">
        
            <link rel="stylesheet" href="/css/markdown-it.css">
        
        
        
    </head>
    <body data-page-type="article" >
        <div id="scroll-progress"><span></span></div>
        <a class="skip-link" href="#main">Skip to main content</a>
        <header class="site-header">
    <div class="container --content">
        <a aria-label="Sean McP" class="logo-link" href="/"></a>
        <div style="align-items:center;display:flex;">
            
            
            
            <nav aria-label="primary" id="desktop-nav"><a  href="/articles/">Articles</a><a  href="/about/">About</a></nav>
            <label class="theme-toggle" style="margin-left:1.25rem">
                <span class="--visually-hidden">Toggle theme</span>
                <input class="--visually-hidden" type="checkbox" id="dark-mode"/>
                <span></span>
            </label>
            <label class="stars-toggle" style="margin-left:1.25rem">
                <span class="--visually-hidden">Toggle stars</span>
                <input class="--visually-hidden" type="checkbox" id="stars-checkbox" checked/>
                <svg width="24" height="22" viewBox="0 0 24 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M12 1.34175L14.6395 7.91471L14.7565 8.20601L15.0697 8.22724L22.1366 8.70642L16.701 13.2479L16.4601 13.4492L16.5367
                            13.7536L18.2648 20.6227L12.2659 16.8565L12 16.6896L11.7341 16.8565L5.73524 20.6227L7.46331 13.7536L7.5399 13.4492L7.29901
                            13.2479L1.8634 8.70642L8.93032 8.22724L9.2435 8.20601L9.36048 7.91471L12 1.34175Z"
                        stroke="currentColor"/>
                </svg>
            </label>
        </div>
    </div>
</header>

        <main id="main" role="main" class="main main--article">
            

<article class="article">
    <div class="container --content">
        
            <time class="date" datetime="2019-02-06">Feb 6, 2019</time>
        
        <h1 style="margin-top:1rem;">Convert class components to functions with React Hooks</h1>
        
            
            <ul class="--horizontal-list">
    
            <li>
                <a href="/tags/react/" class="tag tag--react">React</a>
            </li>
</ul>
        
        <hr class="small"/>
        
        <p>Last year, the React team announced hooks, a feature to more easily abstract logic into reusable components. On the day of the announcement, <a href="https://medium.com/@seanmcp/refactoring-a-render-prop-with-hooks-fc22ed537199">I wrote and article</a> explaining how to refactor a render prop component with hook.</p>
<p>Starting this week with release of <a href="https://reactjs.org/blog/2019/02/06/react-v16.8.0.html">React v16.8</a>, <strong>you can now add hooks in your projects</strong>!</p>
<p>Today, I want to look at a typical class component and demonstrate how you can covert it into a functional component with React hooks. Let’s jump in.</p>
<h2 id="terminology" tabindex="-1">Terminology</h2>
<p><em><strong>Note</strong>: Skip this section if you’re familiar with class and functional React components.</em></p>
<p>I’m going to use the terms “class” and “functional” components to refer to the modern options for creating components. A class component looks something like this:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">ClassExample</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span><br>  state <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">greeting</span><span class="token operator">:</span> <span class="token string">'Hello'</span> <span class="token punctuation">}</span><br>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> <span class="token punctuation">(</span><br>      <span class="token operator">&lt;</span>span<span class="token operator">></span><br>        <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>greeting<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">!</span><br>      <span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span><br>    <span class="token punctuation">)</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<p>Class components have access to internal state; default, custom, and lifecycle methods; and a <code>this</code> to reference. These components have been the powerhouses of React development throughout its history.</p>
<p>The aptly named functional components are functions that return JSX. Here’s a typical example:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token function-variable function">FunctionalExample</span> <span class="token operator">=</span> <span class="token parameter">props</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> greeting <span class="token operator">=</span> <span class="token string">'Howdy'</span><br>  <span class="token keyword">return</span> <span class="token punctuation">(</span><br>    <span class="token operator">&lt;</span>span<span class="token operator">></span><br>      <span class="token punctuation">{</span>greeting<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">!</span><br>    <span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span><br>  <span class="token punctuation">)</span><br><span class="token punctuation">}</span></code></pre>
<p>Functional components lack an internal state, methods, and <code>this</code>. In order to access passed props, we refer to the <code>props</code> parameter.</p>
<p>Because they contain less internal logic, functional components are sometimes referred to as “dumb” or “presentational” components.</p>
<p>Although different in composition, class and functional components are used in the same manner. Let’s reference both examples from above in a hypothetical parent component:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">return</span> <span class="token punctuation">(</span><br>  <span class="token operator">&lt;</span>section<span class="token operator">></span><br>    <span class="token operator">&lt;</span>ClassExample name<span class="token operator">=</span><span class="token string">"Sean"</span> <span class="token operator">/</span><span class="token operator">></span><br>    <span class="token operator">&lt;</span>FunctionalExample name<span class="token operator">=</span><span class="token string">"partner"</span> <span class="token operator">/</span><span class="token operator">></span><br>  <span class="token operator">&lt;</span><span class="token operator">/</span>section<span class="token operator">></span><br><span class="token punctuation">)</span></code></pre>
<p>From the parent’s perspective, the two types of components are identical. To understand how React internally understands and processes these two different types of components, I recommend Dan Abramov’s <a href="https://overreacted.io/how-does-react-tell-a-class-from-a-function/">“How Does React Tell a Class from a Function?”</a>.</p>
<p>These are simplified definitions and examples, but they will provide us with a good basis for the rest of the article.</p>
<h2 id="class-component" tabindex="-1">Class component</h2>
<p>I have a component that makes an API request on mount, stores the response in state, then renders some JSX based on the data. Here’s the code:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">ClassComponent</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span><br>  state <span class="token operator">=</span> <span class="token punctuation">{</span><br>    <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token keyword">null</span><br>  <span class="token punctuation">}</span><br>  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'https://random.dog/woof.json'</span><span class="token punctuation">)</span><br>      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">raw</span> <span class="token operator">=></span> raw<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br>      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">)</span><br>  <span class="token punctuation">}</span><br>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> <span class="token punctuation">(</span><br>      <span class="token operator">&lt;</span>section<span class="token operator">></span><br>        <span class="token operator">&lt;</span>h2<span class="token operator">></span>Doggo<span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">></span><br>        <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>url <span class="token operator">?</span> <span class="token punctuation">(</span><br>          <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>url<span class="token punctuation">}</span> alt<span class="token operator">=</span><span class="token string">"A cute dog"</span> <span class="token operator">/</span><span class="token operator">></span><br>        <span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span><br>          <span class="token operator">&lt;</span>p<span class="token operator">></span>Fetching<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span><br>        <span class="token punctuation">)</span><span class="token punctuation">}</span><br>      <span class="token operator">&lt;</span><span class="token operator">/</span>section<span class="token operator">></span><br>    <span class="token punctuation">)</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<p><em><strong>Note</strong>: To create this example, I looked through Todd Motto’s awesome list of <a href="https://github.com/toddmotto/public-apis">“Public APIs”</a>. Check it out and give it a star if you find it useful.</em></p>
<p>I used the fetch library to keep the example straight forward (and it seemed fitting for an app that displays dog photos), but I recommend using a more robust option like <a href="https://github.com/axios/axios">Axios</a> with better error handling for your applications.</p>
<h2 id="functional-component" tabindex="-1">Functional Component</h2>
<p>Using React Hooks, we can create the same example from above using a functional component.</p>
<h3 id="setup" tabindex="-1">Setup</h3>
<p>First, we’ll create a new file for our functional code and set up a basic function. Then copy the <code>return</code> from our class component and remove all references to <code>this.state</code>. We need to declare a variable to prevent reference errors, so let’s call it <code>url</code>.</p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token keyword">const</span> <span class="token function-variable function">FunctionalComponent</span> <span class="token operator">=</span> <span class="token parameter">props</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><mark class="highlight-line highlight-line-active">  <span class="token keyword">const</span> url <span class="token comment">// We'll change this later</span></mark><br><span class="highlight-line">  <span class="token keyword">return</span> <span class="token punctuation">(</span></span><br><mark class="highlight-line highlight-line-active">    <span class="token operator">&lt;</span>section<span class="token operator">></span></mark><br><mark class="highlight-line highlight-line-active">      <span class="token operator">&lt;</span>h2<span class="token operator">></span>Doggo<span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">></span></mark><br><mark class="highlight-line highlight-line-active">      <span class="token punctuation">{</span>url <span class="token operator">?</span> <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token punctuation">{</span>url<span class="token punctuation">}</span> alt<span class="token operator">=</span><span class="token string">"A cute dog"</span> <span class="token operator">/</span><span class="token operator">></span> <span class="token operator">:</span> <span class="token operator">&lt;</span>p<span class="token operator">></span>Fetching<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span><span class="token punctuation">}</span></mark><br><mark class="highlight-line highlight-line-active">    <span class="token operator">&lt;</span><span class="token operator">/</span>section<span class="token operator">></span></mark><br><span class="highlight-line">  <span class="token punctuation">)</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre>
<h3 id="useeffect" tabindex="-1">useEffect</h3>
<p>In our class component, we make an AJAX request when the component mounted and stored that data in state. <code>componentDidMount</code> and the other lifecycle methods are limited to classes. However, the React team was able to implement those features with the <code>useEffect</code> hook.</p>
<p><code>useEffect</code> is a method that takes two parameters: 1) a function to call on mount, and 2) an array of variables to watch for updating.</p>
<p>For the first parameter, we’ll pass an anonymous function that calls fetch, processes the data, and logs the response. The second argument just be an empty array for now.</p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token keyword">const</span> <span class="token function-variable function">FunctionalComponent</span> <span class="token operator">=</span> <span class="token parameter">props</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token keyword">const</span> url</span><br><mark class="highlight-line highlight-line-active">  React<span class="token punctuation">.</span><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></mark><br><mark class="highlight-line highlight-line-active">    <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'https://random.dog/woof.json'</span><span class="token punctuation">)</span></mark><br><mark class="highlight-line highlight-line-active">      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">raw</span> <span class="token operator">=></span> raw<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></mark><br><mark class="highlight-line highlight-line-active">      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">)</span></mark><br><mark class="highlight-line highlight-line-active">  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span></mark><br><span class="highlight-line">  <span class="token keyword">return</span> <span class="token punctuation">(</span></span><br><span class="highlight-line">    <span class="token operator">&lt;</span>section<span class="token operator">></span></span><br><span class="highlight-line">      <span class="token operator">&lt;</span>h2<span class="token operator">></span>Doggo<span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">></span></span><br><span class="highlight-line">      <span class="token punctuation">{</span>url <span class="token operator">?</span> <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token punctuation">{</span>url<span class="token punctuation">}</span> alt<span class="token operator">=</span><span class="token string">"A cute dog"</span> <span class="token operator">/</span><span class="token operator">></span> <span class="token operator">:</span> <span class="token operator">&lt;</span>p<span class="token operator">></span>Fetching<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span><span class="token punctuation">}</span></span><br><span class="highlight-line">    <span class="token operator">&lt;</span><span class="token operator">/</span>section<span class="token operator">></span></span><br><span class="highlight-line">  <span class="token punctuation">)</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre>
<p>If you are coding along, you should see something like the following in your console when the component mounts:</p>
<pre><code>{ &quot;url&quot;: &quot;https://random.dog/867580b3d005.jpg&quot; }
</code></pre>
<p>This shows us that our API call is working, but logging the response isn’t our goal; we need to store the data for later. Let’s revisit the <code>url</code> variable that we created.</p>
<h3 id="usestate" tabindex="-1">useState</h3>
<p>Now that we have the response from our API, we need to be able to capture and reference that value. In our class component, we used its state and the <code>setState</code> method to remember that data.</p>
<p>React’s <code>useState</code> hook gives us access to a similar API without using a class. When calling the function and optionally passing a default value, we receive two returned variables: 1) a reference to the value, and 2) a function to update that value, respectively.</p>
<p>Using array destructuring, we can grab those variables and assign a name according to the convention: <code>x</code> and <code>setX</code>. For our example, we’ll call the value <code>url</code> and the setter function <code>setUrl</code>.</p>
<p>We’ll replace our old <code>url</code> with the results from <code>useState</code>:</p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token keyword">const</span> <span class="token function-variable function">FunctionalComponent</span> <span class="token operator">=</span> <span class="token parameter">props</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><mark class="highlight-line highlight-line-active">  <span class="token keyword">const</span> <span class="token punctuation">[</span>url<span class="token punctuation">,</span> setUrl<span class="token punctuation">]</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useState</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span></mark><br><span class="highlight-line">  React<span class="token punctuation">.</span><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'https://random.dog/woof.json'</span><span class="token punctuation">)</span></span><br><span class="highlight-line">      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">raw</span> <span class="token operator">=></span> raw<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span><br><span class="highlight-line">      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">)</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span></span><br><span class="highlight-line">  <span class="token keyword">return</span> <span class="token punctuation">(</span></span><br><span class="highlight-line">    <span class="token operator">&lt;</span>section<span class="token operator">></span></span><br><span class="highlight-line">      <span class="token operator">&lt;</span>h2<span class="token operator">></span>Doggo<span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">></span></span><br><span class="highlight-line">      <span class="token punctuation">{</span>url <span class="token operator">?</span> <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token punctuation">{</span>url<span class="token punctuation">}</span> alt<span class="token operator">=</span><span class="token string">"A cute dog"</span> <span class="token operator">/</span><span class="token operator">></span> <span class="token operator">:</span> <span class="token operator">&lt;</span>p<span class="token operator">></span>Fetching<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span><span class="token punctuation">}</span></span><br><span class="highlight-line">    <span class="token operator">&lt;</span><span class="token operator">/</span>section<span class="token operator">></span></span><br><span class="highlight-line">  <span class="token punctuation">)</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre>
<p>Using <code>useState</code>, we can quickly add basic state to our functional component.</p>
<p>In the code above, we’re just logging the response from our API. Now we want to use the <code>setUrl</code> function to set the value or url in our component’s state.</p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token keyword">const</span> <span class="token function-variable function">FunctionalComponent</span> <span class="token operator">=</span> <span class="token parameter">props</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token keyword">const</span> <span class="token punctuation">[</span>url<span class="token punctuation">,</span> setUrl<span class="token punctuation">]</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useState</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span></span><br><span class="highlight-line">  React<span class="token punctuation">.</span><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'https://random.dog/woof.json'</span><span class="token punctuation">)</span></span><br><span class="highlight-line">      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">raw</span> <span class="token operator">=></span> raw<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span><br><mark class="highlight-line highlight-line-active">      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=></span> <span class="token function">setUrl</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">)</span></mark><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span></span><br><span class="highlight-line">  <span class="token keyword">return</span> <span class="token punctuation">(</span></span><br><span class="highlight-line">    <span class="token operator">&lt;</span>section<span class="token operator">></span></span><br><span class="highlight-line">      <span class="token operator">&lt;</span>h2<span class="token operator">></span>Doggo<span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">></span></span><br><span class="highlight-line">      <span class="token punctuation">{</span>url <span class="token operator">?</span> <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token punctuation">{</span>url<span class="token punctuation">}</span> alt<span class="token operator">=</span><span class="token string">"A cute dog"</span> <span class="token operator">/</span><span class="token operator">></span> <span class="token operator">:</span> <span class="token operator">&lt;</span>p<span class="token operator">></span>Fetching<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span><span class="token punctuation">}</span></span><br><span class="highlight-line">    <span class="token operator">&lt;</span><span class="token operator">/</span>section<span class="token operator">></span></span><br><span class="highlight-line">  <span class="token punctuation">)</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre>
<p>Now let’s take a second to revisit the second parameter passed to <code>useEffect</code>. Remember, it contains a list of variables that will trigger the effect to run again on change.</p>
<p>Our effect depends on one outside variable: <code>setUrl</code>. This function is generated once by <code>useState</code>, and adding it to the array will ensure that our fetch call isn’t fired repeatedly.<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token keyword">const</span> <span class="token function-variable function">FunctionalComponent</span> <span class="token operator">=</span> <span class="token parameter">props</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token keyword">const</span> <span class="token punctuation">[</span>url<span class="token punctuation">,</span> setUrl<span class="token punctuation">]</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useState</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span></span><br><span class="highlight-line">  React<span class="token punctuation">.</span><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'https://random.dog/woof.json'</span><span class="token punctuation">)</span></span><br><span class="highlight-line">      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">raw</span> <span class="token operator">=></span> raw<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span><br><span class="highlight-line">      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=></span> <span class="token function">setUrl</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">)</span></span><br><mark class="highlight-line highlight-line-active">  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>setUrl<span class="token punctuation">]</span><span class="token punctuation">)</span></mark><br><span class="highlight-line">  <span class="token keyword">return</span> <span class="token punctuation">(</span></span><br><span class="highlight-line">    <span class="token operator">&lt;</span>section<span class="token operator">></span></span><br><span class="highlight-line">      <span class="token operator">&lt;</span>h2<span class="token operator">></span>Doggo<span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">></span></span><br><span class="highlight-line">      <span class="token punctuation">{</span>url <span class="token operator">?</span> <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token punctuation">{</span>url<span class="token punctuation">}</span> alt<span class="token operator">=</span><span class="token string">"A cute dog"</span> <span class="token operator">/</span><span class="token operator">></span> <span class="token operator">:</span> <span class="token operator">&lt;</span>p<span class="token operator">></span>Fetching<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span><span class="token punctuation">}</span></span><br><span class="highlight-line">    <span class="token operator">&lt;</span><span class="token operator">/</span>section<span class="token operator">></span></span><br><span class="highlight-line">  <span class="token punctuation">)</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre>
<p>That’s it! Checkout the <a href="https://codesandbox.io/s/wwvmq1v407">live example</a> on CodeSandbox to see the two components side-by-side.</p>
<h2 id="comparison" tabindex="-1">Comparison</h2>
<p>Let’s take a moment and consider our two components. The new functional component is a little shorter than the original class component, and the variables are shorter and easier to reference.</p>
<p>Those are nice benefits, but I don’t find either a convincing reason to go back and convert all my class components.</p>
<p>More important to me is the fact that <strong>you can now use a functional component for nearly everything in your application</strong>. Since every component is functional, it makes the process of bringing in or removing state and lifecycle effects much easier.</p>
<h2 id="embrace-the-class-less-future" tabindex="-1">Embrace the class-less future</h2>
<p>For those reasons and others, the future of React is class-less. And that’s a good thing. Hooks provide more flexibility when creating and managing components, to say nothing of <a href="https://reactjs.org/docs/hooks-custom.html">custom hooks</a>.</p>
<p>But don’t panic and convert all your class components right now; <a href="https://twitter.com/dan_abramov/status/1026839679197437953">“they’ll be supported for a looooong time”</a>. However, when you have the opportunity to refactor a class component going forward, consider converting it into a functional component with hooks.</p>
<p>Happy coding!</p>
<hr class="small"/>
    <section class="footnotes --clear-child-margins">
        <h2 class="--visually-hidden">Footnotes</h2>
        <ol>
    <li id="fn1" class="footnote-item"><p>A big thanks to <a href="https://medium.com/@hungtrn75">Hung Tran Van</a> on Medium for <a href="https://medium.com/@hungtrn75/an-infinite-loop-when-u-set-url-state-in-useeffect-efc4426ef4ce">highlighting a previous issue with this article</a>. While fixing my mistake, I found <a href="https://daveceddia.com/useeffect-hook-examples/"><em>How the useEffect Hook Works</em></a> by David Ceddia to be super helpful. <a href="#fnref1" class="footnote-backref">↩︎</a></p>
</li>
</ol>
</section>

        <hr class="small" />
        <section class="article__footer --clear-child-margins">
            <p>
                <a id="comment-link" href="mailto:sean@seanmcp.com?subject=Re: Convert%20class%20components%20to%20functions%20with%20React%20Hooks">Send a comment</a>
            </p>
            
        </section>
    </div>
</article>
<section class="bio">
    <div class="container --content --clear-child-margins">
        <hr class="small"/>
        <h2>About<span class="--visually-hidden">&nbsp;the author</span>
        </h2>
        <div class="bio__content">
            <img alt="" loading="lazy" src="/img/seanmcp_thumbnail.png"/>
            <p>
                
                    Sean McPherson is a software engineer for Khan Academy who specializes in web and mobile app development. He lives with
                    his wife, sons, and dog in Pittsburgh, PA.
                
                (SDG)</p>
        </div>
    </div>
</section>
        </main>

        <footer class="site-footer">
    <div class="container --content --clear-child-margins">
        <div>
            <b>SeanMcP.com</b><br>
            <small>Copyright © 2018-2022 Sean McPherson (SDG)</small>
        </div>
        <div style="display:grid;grid-template-columns:1fr 1fr;">
            <div>
                <h2>Navigation</h2>
                
                
                <nav aria-label="secondary" ><a  href="/about/">About</a><a  href="/articles/">Articles</a><a  href="/tags/">Tags</a><a  href="/talks/">Talks</a><a  href="/notes/">Notes</a><a  href="/bookshelf/">Bookshelf</a><a  href="/soccer/">Soccer</a><a  href="/feed/feed.xml">Feed</a></nav>
            </div>
            <div>
                <h2>Social</h2>
                
                
                <nav aria-label="social" ><a  href="https://github.com/seanmcp">GitHub</a><a  href="https://twitter.com/snmcp">Twitter</a><a  href="https://smcp.dev/yt">YouTube</a><a  href="https://linkedin.com/in/seanmcp">LinkedIn</a></nav>
            </div>
        </div>
    </div>
</footer>
        <!-- Current page: /articles/convert-class-component-to-function-with-hooks/ -->
    </body>
    <script src="/js/scroll-progress.js"></script>
    <script src="/js/theme-toggle.js"></script>
    <script src="/js/stars.js"></script>
    
</html>
<!doctype html>
<html lang="en" >
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        





<title>When to use React&#39;s memo HOC - SeanMcP.com</title>
<meta property="og:site_name" content="SeanMcP.com" />
<meta property="og:title" content="When to use React&#39;s memo HOC" />
<meta name="twitter:title" content="When to use React&#39;s memo HOC">

<meta name="description" content="The memo higher-order component can prevent your component for re-rendering unnecessarily, but you should use caution before using it">
<meta property="og:description" content="The memo higher-order component can prevent your component for re-rendering unnecessarily, but you should use caution before using it" />
<meta name="twitter:description" content="The memo higher-order component can prevent your component for re-rendering unnecessarily, but you should use caution before using it">

<meta property="og:image" content="https://seanmcp.com/img/seanmcp.favicon.png" />
<meta name="twitter:image" content="https://seanmcp.com/img/seanmcp.favicon.png">


<meta property="og:type" content="website" />
<meta property="og:url" content="https://seanmcp.com/articles/when-to-use-reacts-memo-hoc/" />


<meta name="twitter:card" content="summary">
<meta name="twitter:creator" content="@snmcp">
        <link rel="stylesheet" href="/css/index.css">
        <link rel="alternate" href="/feed/feed.xml" type="application/atom+xml" title="Sean McPherson">
        <link rel="alternate" href="feed/notes.xml" type="application/atom+xml" title="Notes on Sean McPherson">
        
            <link rel="shortcut icon" href="/img/seanmcp.favicon.png" type="image/png">
        
        
        <style>:root{--dark:hsl(216, 5%, 10%);--light:hsl(216, 5%, 97%);--accent:hsl(188, 100%, 42%);--primary:hsl(216, 85%, 34%);--background:var(--light);--off-background:hsla(0, 0%, 10%, 20%);--text-color:var(--dark);--anchor-color:var(--primary);--note-anchor-color:var(--accent);--block-code-background:hsla(0, 0%, 0%, 90%);--inline-code-background:hsla(0, 0%, 0%, 7.5%);--inline-code-color:hsla(0, 0%, 0%, 75%);--body-font:-apple-system,BlinkMacSystemFont,Helvetica,Arial,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif;--mono-font:Menlo,Monaco,Consolas,"Andale Mono WT","Andale Mono","Lucida Console","DejaVu Sans Mono","Bitstream Vera Sans Mono","Liberation Mono","Nimbus Mono L","Courier New",Courier,monospace}html[data-page-flavor=soccer]{--accent:hsl(100, 50%, 50%);--primary:hsl(120, 50%, 30%)}body{--scroll-progress-height:6px;background:var(--background);color:var(--text-color);font-family:var(--body-font);margin:0;padding:0;padding-top:var(--scroll-progress-height);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}body[data-theme=dark]{--background:var(--dark);--off-background:hsla(216, 5%, 95%, 15%);--text-color:var(--light);--anchor-color:var(--accent);--inline-code-background:hsla(0, 0%, 0%, 50%);--inline-code-color:hsla(0, 0%, 100%, 85%);--note-anchor-color:var(--primary)}.container{padding:1rem;margin:0 auto}.site-header .container{align-items:center;display:flex;justify-content:space-between}.site-header nav{align-items:center;display:flex;flex-wrap:wrap}.site-header nav a:not(:last-of-type){margin-right:1rem}:is(.stars-toggle,.theme-toggle):hover{cursor:pointer;outline:0!important}:is(.theme-toggle,.stars-toggle):focus-within{outline:3px solid var(--anchor-color);outline-offset:3px}.theme-toggle:hover span::before{transform:translateX(-2px)}.theme-toggle:hover span::after{transform:translateX(2px)}.theme-toggle input+span{--size:1.25em;display:inline-block;position:relative;width:var(--size);height:var(--size)}.theme-toggle input+span::after,.theme-toggle input+span::before{border:1px solid var(--text-color);content:"";display:inline-block;height:calc(var(--size) * 2 / 3);position:relative;transition:transform .1s ease-in-out;width:calc(var(--size) * 2 / 3)}.theme-toggle input+span::before{background-color:var(--text-color)}.theme-toggle input+span::after{background:var(--background);position:absolute;bottom:0;right:0}.theme-toggle input:checked+span::before{background-color:var(--background)}.theme-toggle input:checked+span::after{background-color:var(--text-color);z-index:-1}.stars-toggle{align-items:center;display:flex;justify-content:center}.stars-toggle svg{display:inline-block}.stars-toggle path{transition:transform .2s ease-in-out;transform-origin:50% 50%}.stars-toggle:hover path{transform:rotate(72deg)}.stars-toggle input:checked+svg{fill:currentColor}[data-star]{cursor:pointer;font-size:1.5rem;position:absolute;transform:translate(-50%,-50%)}[data-star]:after{content:"⭐️";display:inline-block}@media screen and (min-width:500px){.container{padding:2rem}.container.--content{max-width:70ch}}.breadcrumbs ol{display:flex;list-style:none;margin:0;padding:0}.breadcrumbs li+li::before{color:var(--off-background);content:"/";display:inline-block;height:1rem;margin:0 .5rem}.skip-link{background-color:var(--primary);color:#fff!important;font-weight:700;position:fixed;padding:1rem;z-index:9999}.skip-link:not(:focus){right:200%}.skip-link:focus{left:0;outline:2px dotted white}#scroll-progress{--height:var(--scroll-progress-height);background:linear-gradient(to right,var(--accent),var(--primary));position:fixed;height:var(--height);left:0;right:0;top:0;z-index:1000}#scroll-progress span{--width:var(--height);border-right:var(--width) solid var(--background);bottom:0;left:calc(var(--width)/ -2);position:absolute;top:0;width:0%}</style>
        
        
            <link rel="stylesheet" href="/css/prism.css">
        
            <link rel="stylesheet" href="/css/markdown-it.css">
        
        
        
    </head>
    <body data-page-type="article" >
        <div id="scroll-progress"><span></span></div>
        <a class="skip-link" href="#main">Skip to main content</a>
        <header class="site-header">
    <div class="container --content">
        <a aria-label="Sean McP" class="logo-link" href="/"></a>
        <div style="align-items:center;display:flex;">
            
            
            
            <nav aria-label="primary" id="desktop-nav"><a  href="/articles/">Articles</a><a  href="/about/">About</a></nav>
            <label class="theme-toggle" style="margin-left:1.25rem">
                <span class="--visually-hidden">Toggle theme</span>
                <input class="--visually-hidden" type="checkbox" id="dark-mode"/>
                <span></span>
            </label>
            <label class="stars-toggle" style="margin-left:1.25rem">
                <span class="--visually-hidden">Toggle stars</span>
                <input class="--visually-hidden" type="checkbox" id="stars-checkbox" checked/>
                <svg width="24" height="22" viewBox="0 0 24 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M12 1.34175L14.6395 7.91471L14.7565 8.20601L15.0697 8.22724L22.1366 8.70642L16.701 13.2479L16.4601 13.4492L16.5367
                            13.7536L18.2648 20.6227L12.2659 16.8565L12 16.6896L11.7341 16.8565L5.73524 20.6227L7.46331 13.7536L7.5399 13.4492L7.29901
                            13.2479L1.8634 8.70642L8.93032 8.22724L9.2435 8.20601L9.36048 7.91471L12 1.34175Z"
                        stroke="currentColor"/>
                </svg>
            </label>
        </div>
    </div>
</header>

        <main id="main" role="main" class="main main--article">
            

<article class="article">
    <div class="container --content">
        
            <time class="date" datetime="2022-04-28">Apr 28, 2022</time>
        
        <h1 style="margin-top:1rem;">When to use React&#39;s memo HOC</h1>
        
            
            <ul class="--horizontal-list">
    
            <li>
                <a href="/tags/react/" class="tag tag--react">React</a>
            </li>
            <li>
                <a href="/tags/performance/" class="tag tag--performance">Performance</a>
            </li>
</ul>
        
        <hr class="small"/>
        
        <p>When React wants to render a component, it renders all of the components in the tree from that point. So if you have a parent component with two child components, a re-render (↻) of the parent will include re-rendering both children.</p>
<pre><code>Parent ↻
├── ChildA ↻
└── ChildB ↻
</code></pre>
<p>Since data typically flows down the tree, this is the behavior that you probably want for the UI to reflect the current state of the application.</p>
<p>However, there may be instances when you do not want a component to re-render when its ancestor re-renders. Let’s imagine a similar scenario with two children. One of the components is presentational while the other has a deep tree of its own.</p>
<pre><code>Parent
├── BasicChild
└── ComplexChild
    ├── GrandChildA
    └── GrandChildB
        └── GreatGrandChild
</code></pre>
<p>Just like before, any changes (✴) to the parent will result in re-rendering all if its children – including the complex subtree. Depending on the depth of the tree or the complexity of the render, this could be a time-consuming render cycle.</p>
<pre><code>Parent ✴↻
├── BasicChild ↻
└── ComplexChild ↻
    ├── GrandChildA ↻
    └── GrandChildB ↻
        └── GreatGrandChild ↻
</code></pre>
<p>We want to prevent <code>ComplexChild</code> from re-rendering unnecessarily to improve the performance of our application.</p>
<p>Thankfully, React has some features to accomplish this.</p>
<h2 id="class-components" tabindex="-1">Class components</h2>
<p>Class components have <a href="https://reactjs.org/docs/react-component.html#shouldcomponentupdate">a <code>shouldComponentUpdate</code> lifecycle method</a> that allow you to determine whether a component should re-render based on props and state.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">PreventRerender</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span><br>    <span class="token function">shouldComponentUpdate</span><span class="token punctuation">(</span><span class="token parameter">nextProps<span class="token punctuation">,</span> nextState</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>value <span class="token operator">!==</span> nextProps<span class="token punctuation">.</span>value<br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<p><a href="https://reactjs.org/docs/react-api.html#reactpurecomponent"><code>PureComponent</code> goes one step further</a> by implementing <code>shouldComponentUpdate</code> with a shallow prop and state comparison. When you component extends <code>PureComponent</code>, it will only re-render if its props or state have changed.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">PreventRerender</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>PureComponent</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></code></pre>
<h2 id="function-components" tabindex="-1">Function components</h2>
<p>For modern function components with no lifecycle methods, we need a different solution. <a href="https://reactjs.org/docs/react-api.html#reactmemo">React exports a <code>memo</code> higher-order component</a> (HOC) that takes a function component and returns a wrapped component that will only re-render if a shallow comparison of props indicates a change.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> PreventRerender <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">memo</span><span class="token punctuation">(</span><br>    <span class="token keyword">function</span> <span class="token function">PreventRerender</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><br><span class="token punctuation">)</span></code></pre>
<p>For more customization, you can pass an optional compare function to <code>React.memo</code> as a second argument that determines whether to render based on previous and next props.</p>
<p>Any of the strategies above to prevent unnecessary re-renders come at a small cost, so make sure to implement them only when necessary. You can use the React DevTools’ Profiler panel to determine which areas of the React tree are good candidates for performance improvements.</p>
<p>In our example above, we could wrap our complex component with <code>React.memo</code> in order to prevent re-rendering when the props are unchanged:</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">export</span> <span class="token keyword">default</span> React<span class="token punctuation">.</span><span class="token function">memo</span><span class="token punctuation">(</span>ComplexChild<span class="token punctuation">)</span></code></pre>
<p>We would not need to do anything to the basic child component, as any memoization or lifecycle checks would probably be more expensive than the cost of re-rendering.</p>
<p>With that change in place, a change within the parent component would only result in re-renders for <code>Parent</code> and <code>BasicChild</code> – the expensive tree in <code>ComplexChild</code> would not change.</p>
<pre><code>Parent ✴↻
├── BasicChild ↻
└── ComplexChild
    ├── GrandChildA
    └── GrandChildB
        └── GreatGrandChild
</code></pre>
<p>I hope that helps explain when and how to use React’s <code>memo</code> HOC.</p>
<p>Happy memoizing!</p>

        <hr class="small" />
        <section class="article__footer --clear-child-margins">
            <p>
                <a id="comment-link" href="mailto:sean@seanmcp.com?subject=Re: When%20to%20use%20React&#39;s%20memo%20HOC">Send a comment</a>
            </p>
            
        </section>
    </div>
</article>
<section class="bio">
    <div class="container --content --clear-child-margins">
        <hr class="small"/>
        <h2>About<span class="--visually-hidden">&nbsp;the author</span>
        </h2>
        <div class="bio__content">
            <img alt="" loading="lazy" src="/img/seanmcp_thumbnail.png"/>
            <p>
                
                    Sean McPherson is a software engineer for Khan Academy who specializes in web and mobile app development. He lives with
                    his wife, sons, and dog in Pittsburgh, PA.
                
                (SDG)</p>
        </div>
    </div>
</section>
        </main>

        <footer class="site-footer">
    <div class="container --content --clear-child-margins">
        <div>
            <b>SeanMcP.com</b><br>
            <small>Copyright © 2018-2022 Sean McPherson (SDG)</small>
        </div>
        <div style="display:grid;grid-template-columns:1fr 1fr;">
            <div>
                <h2>Navigation</h2>
                
                
                <nav aria-label="secondary" ><a  href="/about/">About</a><a  href="/articles/">Articles</a><a  href="/tags/">Tags</a><a  href="/talks/">Talks</a><a  href="/notes/">Notes</a><a  href="/bookshelf/">Bookshelf</a><a  href="/soccer/">Soccer</a><a  href="/feed/feed.xml">Feed</a></nav>
            </div>
            <div>
                <h2>Social</h2>
                
                
                <nav aria-label="social" ><a  href="https://github.com/seanmcp">GitHub</a><a  href="https://twitter.com/snmcp">Twitter</a><a  href="https://smcp.dev/yt">YouTube</a><a  href="https://linkedin.com/in/seanmcp">LinkedIn</a></nav>
            </div>
        </div>
    </div>
</footer>
        <!-- Current page: /articles/when-to-use-reacts-memo-hoc/ -->
    </body>
    <script src="/js/scroll-progress.js"></script>
    <script src="/js/theme-toggle.js"></script>
    <script src="/js/stars.js"></script>
    
</html>